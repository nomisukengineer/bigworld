<% provide(:title, '詳細') %>
<div class="row">
  <section class="detail_info">
      <div class="product-detail-picture">
      <%= image_tag("#{@product.category_id}.png", alt: "T-shirt") %>

      </div>
      <span class="product-detail-content">

        <div class=detail-head>
          <h1>
            <%= @product.product_name %>
          </h1>
          <% if current_user.admin? %>
            <%= link_to "商品を更新", "/products/#{@product.id}/edit", class: 'btn btn-default' %>

          <% else %>
            <%= form_tag("/users/#{@user.id}/favorites", method: :post) do |f| %>
              <input type="submit" value="お気に入り登録", class: 'btn btn-default'></input>
              <input type="hidden" name = "product_id" value = <%= @product.id %> ></input>
              <input type="hidden" name = "reaction_id" value = 1 ></input>
            <% end %>
          <% end %>
        </div>

        <table>
          <tr>
          <th><%= @product.category.category_name %></th>
          <tr>
              <th><%= @product.gender.gender_name %>
              <td>
              </td>
              </th>
          </tr>
          <tr>
              <td>価格</td>　
              <td> ¥<%= @product.price %>

              </td>
              </th>
          </tr>
        </table>

        <div class="product-size">
          <h3>Size</h3>
          <%= form_tag("/products/#{@product.id}", method: :put) do |f| %>
          <input type="submit" value="サイズと在庫を更新", class: 'btn btn-default'></input>
          <input type="hidden" name = "product_id" value = <%= @product.id %> ></input>
          <% end %>



          <% if current_user.admin? %>



          <table><br>
          <tr>
          <th>サイズ</th> <th>ボタン</th>
          </tr>
            <% @size_ids.each do |size_id| %>
              <tr>
                <td><%= Size.find(size_id).size_name %></td>
                <td>
                  <%= form_tag("/products/#{@product.id}", method: :delete) do |f| %>
                    <input type="submit" value="削除する", class: 'btn btn-default'></input>
                    <input type="hidden" name = "product_id" value = <%= @product.id %> ></input>
                    <input type="hidden" name = "size_id" value = <%= size_id %> ></input>
                  <% end %>
                </td>
                <td>
                  <%= form_for(@user, url: "/products/#{@product.id}/update", html: {method: 'get'}) do |f| %>
                    <%= f.label :product_id %>
                    <input type="hidden" name = "product_id" value = <%= @product.id %> ></input>
                    <%= f.submit "サイズと在庫を更新", class: "btn btn-primary" %>
                  <% end %>
                </td>
            <% end %>
            </table>

          <% else %>
              <table>
              <tr>
              <th>サイズ</th> <th>ボタン</th>
              </tr>
              <% @size_ids.each do |size_id| %>
                <tr>
                <td><%= Size.find(size_id).size_name %></td>
                <td>
                <%= form_tag("/users/#{@user.id}/carts", method: :post) do |f| %>
                  <input type="submit" value="買い物カゴに入れる"></input>
                  <input type="hidden" name = "product_id" value = <%= @product.id %> ></input>
                  <input type="hidden" name = "size_id" value = <%= size_id %> ></input>
                <% end %>
                </td>
                </tr>
              <% end %>
              </td>
              </th>
            </table>
          <% end %>
        </div>
      </span>
  </section>
</div>
